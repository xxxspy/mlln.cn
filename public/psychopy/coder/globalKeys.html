<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Global Event Keys &mdash; PsychoPy v1.8-Psychopy教程</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.85.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="PsychoPy v1.8" href="../index.html" />
    <link rel="up" title="Coder" href="coder.html" />
    <link rel="next" title="Tutorial 1: Generating your first stimulus" href="tutorial1.html" />
    <link rel="prev" title="Handling Trials and Conditions" href="codeTrials.html" /> 
  </head>
  <body>


<div id="header"  style="background-color: white">
<table width="100%" cellpadding="10">
<tr><td style="text-align:left;vertical-align:middle">
<a href='/psychopy'><img src="../_static/psychopyDocBanner2.gif" alt="PsychoPy logo" /></a>
</td><td style="text-align:right;vertical-align:middle">
<a href='/psychopy'><img src="../_static/nott_logo.png" alt="University of Nottingham" /></a>
</td></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial1.html" title="Tutorial 1: Generating your first stimulus"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="codeTrials.html" title="Handling Trials and Conditions"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="coder.html" accesskey="U">Coder</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Global Event Keys</a><ul>
<li><a class="reference internal" href="#adding-a-global-event-key-simple">Adding a global event key (simple)</a></li>
<li><a class="reference internal" href="#adding-a-global-event-key-advanced">Adding a global event key (advanced)</a></li>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#number-of-active-event-keys">Number of active event keys</a></li>
<li><a class="reference internal" href="#removing-global-event-keys">Removing global event keys</a><ul>
<li><a class="reference internal" href="#psychopy-event-globalkeys-remove"><code class="docutils literal"><span class="pre">psychopy.event.globalKeys.remove()</span></code></a></li>
<li><a class="reference internal" href="#del"><cite>del</cite></a></li>
<li><a class="reference internal" href="#psychopy-event-globalkeys-pop"><code class="docutils literal"><span class="pre">psychopy.event.globalKeys.pop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#global-shutdown-key">Global shutdown key</a></li>
<li><a class="reference internal" href="#a-working-example">A working example</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="codeTrials.html"
                                  title="previous chapter">Handling Trials and Conditions</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="tutorial1.html"
                                  title="next chapter">Tutorial 1: Generating your first stimulus</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/coder/globalKeys.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>

            <h3>Quick links</h3>
            <ul>
            <li><a href="/2018/03/07/psychopy绿色免安装版下载/"><strong>psychopy免安装版下载</strong></a></li>
            <li><a href="http://mlln.cn">心理学技术讨论群:680552969</a></li>
            <li><a href="http://mlln.cn">站长QQ: 675495787</a></li>
            <li><a href="https://shop68313372.taobao.com/">淘宝店</a></li>
            </ul>

          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="global-event-keys">
<h1>Global Event Keys<a class="headerlink" href="#global-event-keys" title="Permalink to this headline">¶</a></h1>
<p>Global event keys are single keys (or combinations of a single key and one or
more &#8220;modifier&#8221; keys such as Ctrl, Alt, etc.) with an associated Python
callback function. This function will be executed if the key (or
key/modifiers combination) was pressed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Global event keys only work with the <cite>pyglet</cite> backend, which is the default.</p>
</div>
<p>PsychoPy fully automatically monitors and processes key presses during most
portions of the experimental run, for example during
<cite>core.wait()</cite> periods, or when calling <cite>win.flip()</cite>. If a global
event key press is detected, the specified function will be run
immediately. You are not required to manually poll and check for key
presses. This can be particularly useful to implement a global
&#8220;shutdown&#8221; key, or to trigger laboratory equipment on a key press
when testing your experimental script &#8211; without cluttering the code.
But of course the application is not limited to these two scenarios.
In fact, you can associate any Python function with a global event key.</p>
<p>All active global event keys are stored in <cite>event.globalKeys</cite>.</p>
<div class="section" id="adding-a-global-event-key-simple">
<h2>Adding a global event key (simple)<a class="headerlink" href="#adding-a-global-event-key-simple" title="Permalink to this headline">¶</a></h2>
<p>First, let&#8217;s ensure no global event keys are currently set by calling
func:<cite>event.globalKeys.clear</cite>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="k">import</span> <span class="n">event</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<p>To add a new global event key, you need to invoke
func:<cite>event.globalKeys.add</cite>. This function has two required arguments: the
key name, and the function to associate with that key.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">myfunc</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">myfunc</span><span class="p">)</span>
</pre></div>
</div>
<p>Look at <cite>event.globalKeys</cite>, we can see that the global event key has indeed
been created.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span>
<span class="go">&lt;_GlobalEventKeys :</span>
<span class="go">    [A] -&gt; &#39;myfunc&#39; &lt;function myfunc at 0x10669ba28&gt;</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Your output should look similar. You may happen to spot
We can take a closer look at the specific global key event we added.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">_GlobalEvent(func=&lt;function myfunc at 0x10669ba28&gt;, func_args=(), func_kwargs={}, name=&#39;myfunc&#39;)</span>
</pre></div>
</div>
<p>This output tells us that</p>
<ul class="simple">
<li>our key <cite>a</cite> is associated with our function <cite>myfunc</cite></li>
<li><cite>myfunc</cite> will be called without passing any positional or keyword
arguments (<cite>func_args</cite> and <cite>func_kwargs</cite>, respectively)</li>
<li>the event name was automatically set to the name of the function.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pressing the key won&#8217;t do anything unless a <a class="reference internal" href="../api/visual/window.html#psychopy.visual.Window" title="psychopy.visual.Window"><code class="xref py py-class docutils literal"><span class="pre">psychopy.visual.Window</span></code></a>
is created and and its :func:~`psychopy.visual.Window.flip` method or
<a class="reference internal" href="../api/core.html#psychopy.core.wait" title="psychopy.core.wait"><code class="xref py py-func docutils literal"><span class="pre">psychopy.core.wait()</span></code></a> are called.</p>
</div>
</div>
<div class="section" id="adding-a-global-event-key-advanced">
<h2>Adding a global event key (advanced)<a class="headerlink" href="#adding-a-global-event-key-advanced" title="Permalink to this headline">¶</a></h2>
<p>We are going to associate a function with a more complex calling signature
(with positional and keyword arguments) with a global event key. First, let&#8217;s
create the dummy function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">myfunc2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Next, compile some positional and keyword arguments and a custom name for this
event. Positional arguments must be passed as tists or uples, and keyword
arguments as dictionaries.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;my name&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even when intending to pass only a single positional argument, <cite>args</cite> must be
a list or tuple, e.g., <cite>args = [1]</cite> or <cite>args = (1,)</cite>.</p>
</div>
<p>Finally, specify the key and a combination of modifiers. While key names are
just strings, modifiers are lists or tuples of modifier names.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modifiers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even when specifying only a single modifier key, <cite>modifiers</cite> must be a list
or tuple, e.g., <cite>modifiers = [&#8216;ctrl&#8217;]</cite> or <cite>modifiers = (&#8216;ctrl&#8217;,)</cite>.</p>
</div>
<p>We are now ready to create the global event key.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">modifiers</span><span class="o">=</span><span class="n">modifiers</span><span class="p">,</span>
<span class="gp">... </span><span class="n">func</span><span class="o">=</span><span class="n">myfunc2</span><span class="p">,</span> <span class="n">func_args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">func_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
<span class="gp">... </span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Check that the global event key was successfully added.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span>
<span class="go">&lt;_GlobalEventKeys :</span>
<span class="go">    [A] -&gt; &#39;myfunc&#39; &lt;function myfunc at 0x10669ba28&gt;</span>
<span class="go">    [CTRL] + [ALT] + [B] -&gt; &#39;my name&#39; &lt;function myfunc2 at 0x112eecb90&gt;</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>The key combination <cite>[CTRL] + [ALT] + [B]</cite> is now associated with the function
<cite>myfunc2</cite>, which will be called in the following way:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myfunc2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="indexing">
<span id="id1"></span><h2>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h2>
<p><cite>event.globalKeys</cite> can be accessed like an ordinary dictionary. The index keys
are <cite>(key, modifiers)</cite> namedtuples.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[_IndexKey(key=&#39;a&#39;, modifiers=()), _IndexKey(key=&#39;b&#39;, modifiers=(&#39;ctrl&#39;, &#39;alt&#39;))]</span>
</pre></div>
</div>
<p>To access the global event associated with the key combination
<cite>[CTRL] + [ALT] + [B]</cite>, we can do</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">]]</span>
<span class="go">_GlobalEvent(func=&lt;function myfunc2 at 0x112eecb90&gt;, func_args=(1, 2), func_kwargs={&#39;foo&#39;: 3, &#39;bar&#39;: 4}, name=&#39;my name&#39;)</span>
</pre></div>
</div>
<p>To make access more convenient, specifying the modifiers is optional in case
none were passed to <code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.add()</span></code> when the global
event key was added, meaning the following commands are identical.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">()]</span>
<span class="go">_GlobalEvent(func=&lt;function myfunc at 0x10669ba28&gt;, func_args=(), func_kwargs={}, name=&#39;myfunc&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">_GlobalEvent(func=&lt;function myfunc at 0x10669ba28&gt;, func_args=(), func_kwargs={}, name=&#39;myfunc&#39;)</span>
</pre></div>
</div>
<p>All elements of a global event can be accessed directly.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;function myfunc2 at 0x112eecb90&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">func_args</span>
<span class="go">(1, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">func_kwargs</span>
<span class="go">{&#39;foo&#39;: 3, &#39;bar&#39;: 4}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;my name&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="number-of-active-event-keys">
<h2>Number of active event keys<a class="headerlink" href="#number-of-active-event-keys" title="Permalink to this headline">¶</a></h2>
<p>The number of currently active event keys can be retrieved by passing
<cite>event.globalKeys</cite> to the <cite>len()</cite> function.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-global-event-keys">
<h2>Removing global event keys<a class="headerlink" href="#removing-global-event-keys" title="Permalink to this headline">¶</a></h2>
<p>There are three ways to remove global event keys:</p>
<ul class="simple">
<li>using <code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.remove()</span></code>,</li>
<li>using <cite>del</cite>, and</li>
<li>using <code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.pop()</span></code>.</li>
</ul>
<div class="section" id="psychopy-event-globalkeys-remove">
<h3><code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.remove()</span></code><a class="headerlink" href="#psychopy-event-globalkeys-remove" title="Permalink to this headline">¶</a></h3>
<p>To remove a single key, pass the key name and modifiers (if any) to
<code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.remove()</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A convenience method to quickly delete <em>all</em> global event keys is to pass
<cite>key=&#8217;all&#8217;</cite></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="del">
<h3><cite>del</cite><a class="headerlink" href="#del" title="Permalink to this headline">¶</a></h3>
<p>Like with other dictionaries, items can be removed from <cite>event.globalKeys</cite>
by using the <cite>del</cite> statement. The provided index key must be specified as
described in <a class="reference internal" href="#indexing"><span class="std std-ref">Indexing</span></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="psychopy-event-globalkeys-pop">
<h3><code class="xref py py-func docutils literal"><span class="pre">psychopy.event.globalKeys.pop()</span></code><a class="headerlink" href="#psychopy-event-globalkeys-pop" title="Permalink to this headline">¶</a></h3>
<p>Again, as other dictionaries, <cite>event.globalKeys</cite> provides a <cite>pop</cite> method to
retrieve an item and remove it from the dict. The first argument to <cite>pop</cite> is the
index key, specified as described in <a class="reference internal" href="#indexing"><span class="std std-ref">Indexing</span></a>. The second argument is
optional. Its value will be returned in case no item with the matching indexing
key could be found, for example if the item had already been removed previously.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">_GlobalEvent(func=&lt;function myfunc at 0x10669ba28&gt;, func_args=(), func_kwargs={}, name=&#39;myfunc&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="global-shutdown-key">
<h2>Global shutdown key<a class="headerlink" href="#global-shutdown-key" title="Permalink to this headline">¶</a></h2>
<p>The PsychoPy preferences for <cite>shutdownKey</cite> and <cite>shutdownKeyModifiers</cite>
(both unset by default) will be used to automatically create a global
shutdown key. To demonstrate this automated behavior, let us first change
the preferences programmatically (these changes will be lost when quitting the
current Python session).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psychopy.preferences</span> <span class="k">import</span> <span class="n">prefs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prefs</span><span class="o">.</span><span class="n">general</span><span class="p">[</span><span class="s1">&#39;shutdownKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;q&#39;</span>
</pre></div>
</div>
<p>We can now check if a global shutdown key has been automatically created.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="k">import</span> <span class="n">event</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span>
<span class="go">&lt;_GlobalEventKeys :</span>
<span class="go">    [Q] -&gt; &#39;shutdown (auto-created from prefs)&#39; &lt;function quit at 0x10c171938&gt;</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>And indeed, it worked!</p>
<p>What happened behind the scences? When importing the <cite>psychopy.event</cite>
module, the initialization of <cite>event.globalKeys</cite> checked for valid shutdown key
preferences and automatically initialized a shutdown key accordingly.
This key is associated with the :func:~`psychopy.core.quit` function, which will
shut down PsychoPy.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psychopy.core</span> <span class="k">import</span> <span class="n">quit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">func</span> <span class="o">==</span> <span class="n">quit</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Of course you can very easily add a global shutdown key manually, too. You
simply have to associate a key with :func:~`psychopy.core.quit`.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="k">import</span> <span class="n">core</span><span class="p">,</span> <span class="n">event</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;shutdown&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>That&#8217;s it!</p>
</div>
<div class="section" id="a-working-example">
<h2>A working example<a class="headerlink" href="#a-working-example" title="Permalink to this headline">¶</a></h2>
<p>In the above code snippets, our global event keys were not actually functional,
as we didn&#8217;t create a window, which is required to actually collect the key
presses. Our working example will thus first create a window and then add
global event keys to change the window color and quit the experiment,
respectively.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">psychopy</span> <span class="k">import</span> <span class="n">core</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">visual</span>


<span class="k">def</span> <span class="nf">change_color</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">win</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span> <span class="k">if</span> <span class="n">win</span><span class="o">.</span><span class="n">color</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span> <span class="k">else</span> <span class="s1">&#39;gray&#39;</span>
    <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Changed color to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">win</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>


<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                       <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Press C to change color,</span><span class="se">\n</span><span class="s1"> CTRL + Q to quit.&#39;</span><span class="p">)</span>

<span class="c1"># Global event key to change window background color.</span>
<span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span>
                     <span class="n">func</span><span class="o">=</span><span class="n">change_color</span><span class="p">,</span>
                     <span class="n">func_args</span><span class="o">=</span><span class="p">[</span><span class="n">win</span><span class="p">],</span>
                     <span class="n">func_kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                     <span class="n">name</span><span class="o">=</span><span class="s1">&#39;change window color&#39;</span><span class="p">)</span>

<span class="c1"># Global event key (with modifier) to quit the experiment (&quot;shutdown key&quot;).</span>
<span class="n">event</span><span class="o">.</span><span class="n">globalKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="n">modifiers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">],</span> <span class="n">func</span><span class="o">=</span><span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">text</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <div class="container"><div id="SOHUCS"></div>
			<script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
			<script type="text/javascript">
			window.changyan.api.config({
			appid: 'cysqnjGqk',
			conf: 'prod_023698c59c1b0d0e29687979a2d2e9a3'
			});
			</script>
		  </div>
        </div>
      </div>

      <div class="clearer"></div>
      
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial1.html" title="Tutorial 1: Generating your first stimulus"
             >next</a> |</li>
        <li class="right" >
          <a href="codeTrials.html" title="Handling Trials and Conditions"
             >previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="coder.html" >Coder</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, Jonathan Peirce.
      Last updated on Mar 08, 2018.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>