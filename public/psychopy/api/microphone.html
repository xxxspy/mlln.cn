<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>psychopy.microphone - Capture and analyze sound &mdash; PsychoPy v1.8-Psychopy教程</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.85.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="PsychoPy v1.8" href="../index.html" />
    <link rel="up" title="Reference Manual (API)" href="api.html" />
    <link rel="next" title="psychopy.misc - miscellaneous routines for converting units etc" href="misc.html" />
    <link rel="prev" title="psychopy.logging - control what gets logged" href="logging.html" /> 
  </head>
  <body>


<div id="header"  style="background-color: white">
<table width="100%" cellpadding="10">
<tr><td style="text-align:left;vertical-align:middle">
<a href='/psychopy'><img src="../_static/psychopyDocBanner2.gif" alt="PsychoPy logo" /></a>
</td><td style="text-align:right;vertical-align:middle">
<a href='/psychopy'><img src="../_static/nott_logo.png" alt="University of Nottingham" /></a>
</td></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="misc.html" title="psychopy.misc - miscellaneous routines for converting units etc"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="logging.html" title="psychopy.logging - control what gets logged"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="api.html" accesskey="U">Reference Manual (API)</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">psychopy.microphone</span></code> - Capture and analyze sound</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#audio-capture">Audio Capture</a></li>
<li><a class="reference internal" href="#speech-recognition">Speech recognition</a></li>
<li><a class="reference internal" href="#misc">Misc</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="logging.html"
                                  title="previous chapter"><code class="docutils literal"><span class="pre">psychopy.logging</span></code> - control what gets logged</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="misc.html"
                                  title="next chapter"><code class="docutils literal"><span class="pre">psychopy.misc</span></code> - miscellaneous routines for converting units etc</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/microphone.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>

            <h3>Quick links</h3>
            <ul>
            <li><a href="/2018/03/07/psychopy绿色免安装版下载/"><strong>psychopy免安装版下载</strong></a></li>
            <li><a href="http://mlln.cn">心理学技术讨论群:680552969</a></li>
            <li><a href="http://mlln.cn">站长QQ: 675495787</a></li>
            <li><a href="https://shop68313372.taobao.com/">淘宝店</a></li>
            </ul>

          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="psychopy-microphone-capture-and-analyze-sound">
<span id="microphone"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">psychopy.microphone</span></code> - Capture and analyze sound<a class="headerlink" href="#psychopy-microphone-capture-and-analyze-sound" title="Permalink to this headline">¶</a></h1>
<p>(Available as of version 1.74.00; Advanced features available as of 1.77.00)</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><strong>AudioCapture()</strong> allows easy audio recording and saving of arbitrary sounds to a file (wav format).
AudioCapture will likely be replaced entirely by AdvAudioCapture in the near future.</p>
<p><strong>AdvAudioCapture()</strong> can do everything AudioCapture does, and also allows onset-marker sound
insertion and detection, loudness computation (RMS audio &#8220;power&#8221;), and lossless file compression (flac).
The Builder microphone component now uses AdvAudioCapture by default.</p>
</div>
<div class="section" id="audio-capture">
<h2>Audio Capture<a class="headerlink" href="#audio-capture" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="psychopy.microphone.switchOn">
<code class="descclassname">psychopy.microphone.</code><code class="descname">switchOn</code><span class="sig-paren">(</span><em>sampleRate=48000</em>, <em>outputDevice=None</em>, <em>bufferSize=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.switchOn" title="Permalink to this definition">¶</a></dt>
<dd><p>You need to switch on the microphone before use, which can take
several seconds. The only time you can specify the sample rate (in Hz)
is during switchOn().</p>
<p>Considerations on the default sample rate 48kHz:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DVD</span> <span class="ow">or</span> <span class="n">video</span> <span class="o">=</span> <span class="mi">48</span><span class="p">,</span><span class="mi">000</span>
<span class="n">CD</span><span class="o">-</span><span class="n">quality</span>   <span class="o">=</span> <span class="mi">44</span><span class="p">,</span><span class="mi">100</span> <span class="o">/</span> <span class="mi">24</span> <span class="n">bit</span>
<span class="n">human</span> <span class="n">hearing</span><span class="p">:</span> <span class="o">~</span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span> <span class="p">(</span><span class="n">adult</span><span class="p">);</span> <span class="n">children</span> <span class="o">&amp;</span> <span class="n">young</span> <span class="n">adult</span> <span class="n">higher</span>
<span class="n">human</span> <span class="n">speech</span><span class="p">:</span> <span class="mi">100</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="mi">000</span> <span class="p">(</span><span class="n">useful</span> <span class="k">for</span> <span class="n">telephone</span><span class="p">:</span> <span class="mi">100</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
<span class="n">Google</span> <span class="n">speech</span> <span class="n">API</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span><span class="mi">000</span> <span class="ow">or</span> <span class="mi">8</span><span class="p">,</span><span class="mi">000</span> <span class="n">only</span>
<span class="n">Nyquist</span> <span class="n">frequency</span><span class="p">:</span> <span class="n">twice</span> <span class="n">the</span> <span class="n">highest</span> <span class="n">rate</span><span class="p">,</span> <span class="n">good</span> <span class="n">to</span> <span class="n">oversample</span> <span class="n">a</span> <span class="n">bit</span>
</pre></div>
</div>
<p>pyo&#8217;s downsamp() function can reduce 48,000 to 16,000 in about 0.02s
(uses integer steps sizes). So recording at 48kHz will generate
high-quality archival data, and permit easy downsampling.</p>
<dl class="docutils">
<dt>outputDevice, bufferSize: set these parameters on the pyoSndServer</dt>
<dd>before booting; None means use pyo&#8217;s default values</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="psychopy.microphone.AdvAudioCapture">
<em class="property">class </em><code class="descclassname">psychopy.microphone.</code><code class="descname">AdvAudioCapture</code><span class="sig-paren">(</span><em>name='advMic'</em>, <em>filename=''</em>, <em>saveDir=''</em>, <em>sampletype=0</em>, <em>buffering=16</em>, <em>chnl=0</em>, <em>stereo=True</em>, <em>autoLog=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Class extends AudioCapture, plays marker sound as a &#8220;start&#8221; indicator.</p>
<p>Has method for retrieving the marker onset time from the file, to allow
calculation of vocal RT (or other sound-based RT).</p>
<p>See Coder demo &gt; input &gt; latencyFromTone.py</p>
<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.compress">
<code class="descname">compress</code><span class="sig-paren">(</span><em>keep=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.compress" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress using FLAC (lossless compression).</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.getLoudness">
<code class="descname">getLoudness</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.getLoudness" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the RMS loudness of the saved recording.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.getMarkerInfo">
<code class="descname">getMarkerInfo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.getMarkerInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (hz, duration, volume) of the marker sound.
Custom markers always return 0 hz (regardless of the sound).</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.getMarkerOnset">
<code class="descname">getMarkerOnset</code><span class="sig-paren">(</span><em>chunk=128</em>, <em>secs=0.5</em>, <em>filename=''</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.getMarkerOnset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return (onset, offset) time of the first marker within the
first <cite>secs</cite> of the saved recording.</p>
<p>Has approx ~1.33ms resolution at 48000Hz, chunk=64. Larger chunks
can speed up processing times, at a sacrifice of some resolution,
e.g., to pre-process long recordings with multiple markers.</p>
<p>If given a filename, it will first set that file as the one to
work with, and then try to detect the onset marker.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.playMarker">
<code class="descname">playMarker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.playMarker" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays the current marker sound. This is automatically called at the
start of recording, but can be called anytime to insert a marker.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.playback">
<code class="descname">playback</code><span class="sig-paren">(</span><em>block=True</em>, <em>loops=0</em>, <em>stop=False</em>, <em>log=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.playback" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays the saved .wav file, as just recorded or resampled. Execution
blocks by default, but can return immediately with <cite>block=False</cite>.</p>
<p><cite>loops</cite> : number of extra repetitions; 0 = play once</p>
<p><cite>stop</cite> : True = immediately stop ongoing playback (if there is one),
and return</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>sec</em>, <em>filename=''</em>, <em>block=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts recording and plays an onset marker tone just prior
to returning. The idea is that the start of the tone in the
recording indicates when this method returned, to enable you to sync
a known recording onset with other events.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.resample">
<code class="descname">resample</code><span class="sig-paren">(</span><em>newRate=16000</em>, <em>keep=True</em>, <em>log=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-sample the saved file to a new rate, return the full path.</p>
<p>Can take several visual frames to resample a 2s recording.</p>
<p>The default values for resample() are for Google-speech, keeping the
original (presumably recorded at 48kHz) to archive.
A warning is generated if the new rate not an integer factor /
multiple of the old rate.</p>
<p>To control anti-aliasing, use pyo.downsamp() or upsamp() directly.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>log=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Restores to fresh state, ready to record again</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.setFile">
<code class="descname">setFile</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.setFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the name of the file to work with.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.setMarker">
<code class="descname">setMarker</code><span class="sig-paren">(</span><em>tone=19000</em>, <em>secs=0.015</em>, <em>volume=0.03</em>, <em>log=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.setMarker" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the onset marker, where <cite>tone</cite> is either in hz or a custom
sound.</p>
<p>The default tone (19000 Hz) is recommended for auto-detection,
as being easier to isolate from speech sounds (and so reliable
to detect). The default duration and volume are appropriate for
a quiet setting such as a lab testing room. A louder volume, longer
duration, or both may give better results when recording loud sounds
or in noisy environments, and will be auto-detected just fine
(even more easily). If the hardware microphone in use is not
physically near the speaker hardware, a louder volume is likely
to be required.</p>
<p>Custom sounds cannot be auto-detected, but are supported anyway for
presentation purposes. E.g., a recording of someone saying &#8220;go&#8221; or
&#8220;stop&#8221; could be passed as the onset marker.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><em>log=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt a recording that is in progress; close &amp; keep the file.</p>
<p>Ends the recording before the duration that was initially specified.
The same file name is retained, with the same onset time but a
shorter duration.</p>
<p>The same recording cannot be resumed after a stop (it is not a pause),
but you can start a new one.</p>
</dd></dl>

<dl class="method">
<dt id="psychopy.microphone.AdvAudioCapture.uncompress">
<code class="descname">uncompress</code><span class="sig-paren">(</span><em>keep=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.AdvAudioCapture.uncompress" title="Permalink to this definition">¶</a></dt>
<dd><p>Uncompress from FLAC to .wav format.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="speech-recognition">
<h2>Speech recognition<a class="headerlink" href="#speech-recognition" title="Permalink to this headline">¶</a></h2>
<p>Google&#8217;s speech to text API is no longer available. AT&amp;T, IBM, and wit.ai have
a similar (paid) service.</p>
</div>
<div class="section" id="misc">
<h2>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h2>
<p>Functions for file-oriented Discrete Fourier Transform and RMS computation are also provided.</p>
<dl class="function">
<dt id="psychopy.microphone.wav2flac">
<code class="descclassname">psychopy.microphone.</code><code class="descname">wav2flac</code><span class="sig-paren">(</span><em>path</em>, <em>keep=True</em>, <em>level=5</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.wav2flac" title="Permalink to this definition">¶</a></dt>
<dd><p>Lossless compression: convert .wav file (on disk) to .flac format.</p>
<p>If <cite>path</cite> is a directory name, convert all .wav files in the directory.</p>
<p><cite>keep</cite> to retain the original .wav file(s), default <cite>True</cite>.</p>
<dl class="docutils">
<dt><cite>level</cite> is compression level: 0 is fastest but larger,</dt>
<dd>8 is slightly smaller but much slower.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="psychopy.microphone.flac2wav">
<code class="descclassname">psychopy.microphone.</code><code class="descname">flac2wav</code><span class="sig-paren">(</span><em>path</em>, <em>keep=True</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.flac2wav" title="Permalink to this definition">¶</a></dt>
<dd><p>Uncompress: convert .flac file (on disk) to .wav format (new file).</p>
<p>If <cite>path</cite> is a directory name, convert all .flac files in the directory.</p>
<p><cite>keep</cite> to retain the original .flac file(s), default <cite>True</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="psychopy.microphone.getDft">
<code class="descclassname">psychopy.microphone.</code><code class="descname">getDft</code><span class="sig-paren">(</span><em>data</em>, <em>sampleRate=None</em>, <em>wantPhase=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.getDft" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and return magnitudes of numpy.fft.fft() of the data.</p>
<p>If given a sample rate (samples/sec), will return (magn, freq).
If wantPhase is True, phase in radians is also returned
(magn, freq, phase). data should have power-of-2 samples,
or will be truncated.</p>
</dd></dl>

<dl class="function">
<dt id="psychopy.microphone.getRMS">
<code class="descclassname">psychopy.microphone.</code><code class="descname">getRMS</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#psychopy.microphone.getRMS" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and return the audio power (&#8220;loudness&#8221;).</p>
<p>Uses numpy.std() as RMS. std() is same as RMS if the mean is 0,
and .wav data should have a mean of 0.
Returns an array if given stereo data (RMS computed within-channel).</p>
<p><cite>data</cite> can be an array (1D, 2D) or filename; .wav format only.
data from .wav files will be normalized to -1..+1 before RMS is computed.</p>
</dd></dl>

</div>
</div>


          </div>
          <div class="container"><div id="SOHUCS"></div>
			<script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
			<script type="text/javascript">
			window.changyan.api.config({
			appid: 'cysqnjGqk',
			conf: 'prod_023698c59c1b0d0e29687979a2d2e9a3'
			});
			</script>
		  </div>
        </div>
      </div>

      <div class="clearer"></div>
      
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="misc.html" title="psychopy.misc - miscellaneous routines for converting units etc"
             >next</a> |</li>
        <li class="right" >
          <a href="logging.html" title="psychopy.logging - control what gets logged"
             >previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="api.html" >Reference Manual (API)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, Jonathan Peirce.
      Last updated on Mar 08, 2018.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>